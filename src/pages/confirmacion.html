<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Confirmación de Registro</title>
  <link rel="stylesheet" href="/css/Login-Register.css" />
  
</head>
<body>
  <!-- Modal de Términos -->
  <div class="terms-modal active" id="termsModal">
    <div class="terms-content">
      <div class="terms-header">
        <h2>Términos y Condiciones</h2>
        <p>
          Al continuar con el registro, también aceptas nuestro
          <a href="#" id="showPrivacyPolicy" style="color: #ffffff; text-decoration: underline;">Aviso de Privacidad</a>.
        </p>
      </div>

      <div class="terms-text">
  <h3>1. Aceptación de los Términos</h3>
  <p>
    Al registrarse y utilizar la plataforma PREFECT APP (en adelante, "la Plataforma"), el usuario acepta expresamente cumplir con los presentes Términos y Condiciones. Si el usuario no acepta total o parcialmente estos términos, deberá abstenerse de utilizar la Plataforma.
  </p>

  <h3>2. Definición de Roles</h3>
  <p>PREFECT APP establece dos tipos de usuarios:</p>
  <ul>
    <li><strong>Administrador:</strong> Persona con privilegios de gestión total sobre la Plataforma, incluyendo usuarios, horarios, reportes y configuración general.</li>
    <li><strong>Prefecto:</strong> Persona con acceso limitado, encargada del registro y control de asistencia, retardos y faltas del personal docente.</li>
  </ul>

  <h3>3. Uso Autorizado y Buenas Prácticas</h3>
  <p>
    La Plataforma está destinada exclusivamente a fines de gestión institucional en entornos educativos. El uso debe regirse por principios de legalidad, integridad, veracidad y confidencialidad.
  </p>

  <h4>3.1 Obligaciones del Usuario</h4>
  <ul>
    <li>Proporcionar datos verídicos en el registro y uso del sistema.</li>
    <li>Utilizar el sistema conforme a su propósito funcional.</li>
    <li>No suplantar la identidad de otros usuarios ni permitir el acceso a terceros con sus credenciales.</li>
  </ul>

  <h4>3.2 Prohibiciones</h4>
  <ul>
    <li>Acceder, modificar o eliminar información sin autorización expresa.</li>
    <li>Difundir, copiar o reutilizar contenido o datos obtenidos en la Plataforma con fines ajenos a los objetivos institucionales.</li>
    <li>Realizar actividades que afecten la disponibilidad, seguridad o integridad del sistema.</li>
  </ul>

  <h3>4. Protección de Datos Personales</h3>
  <p>
    PREFECT APP respeta y protege los datos personales de los usuarios conforme a la Ley Federal de Protección de Datos Personales en Posesión de los Particulares (LFPDPPP). Los datos recabados serán utilizados únicamente para fines operativos, estadísticos y de mejora del servicio, y no serán compartidos con terceros sin el consentimiento del usuario, salvo requerimiento legal.
  </p>
  <p>
    Se aplican los principios de licitud, consentimiento, información, calidad, finalidad, lealtad, proporcionalidad y responsabilidad en el tratamiento de la información.
  </p>

  <h3>5. Derechos ARCO (Acceso, Rectificación, Cancelación y Oposición)</h3>
  <p>
    El usuario tiene derecho a acceder, rectificar, cancelar u oponerse al tratamiento de sus datos personales conforme a la LFPDPPP. Para ejercer estos derechos, el usuario deberá enviar una solicitud a <strong>privacidad@prefectapp.com</strong>, incluyendo:
  </p>
  <ul>
    <li>Nombre completo del titular de los datos.</li>
    <li>Descripción clara de los datos a los que se refiere.</li>
    <li>Acción solicitada (acceso, rectificación, cancelación u oposición).</li>
    <li>Copia de una identificación oficial.</li>
  </ul>
  <p>
    La respuesta será emitida en un plazo no mayor a 20 días hábiles a partir de la recepción de la solicitud.
  </p>

  <h3>6. Seguridad de la Información</h3>
  <p>
    Se han implementado mecanismos técnicos y organizativos para proteger la información, tales como cifrado de contraseñas, verificación de identidad mediante OTP y gestión segura de sesiones. Es responsabilidad del usuario mantener la confidencialidad de su contraseña y cerrar sesión al finalizar el uso.
  </p>

  <h3>7. Responsabilidades del Administrador</h3>
  <p>Los administradores se comprometen a:</p>
  <ul>
    <li>Respetar la privacidad de la información registrada por los usuarios.</li>
    <li>Configurar adecuadamente los permisos de acceso a cada perfil.</li>
    <li>Auditar el uso del sistema para prevenir acciones indebidas.</li>
  </ul>

  <h3>8. Registro y Veracidad de Datos</h3>
  <p>
    Los prefectos deben registrar con veracidad la asistencia, faltas y retardos de los docentes. Cualquier intento de manipulación, falsificación o alteración intencional de los datos podrá conllevar a la suspensión inmediata del usuario.
  </p>

  <h3>9. Disponibilidad del Servicio</h3>
  <p>
    PREFECT APP trabaja para garantizar el acceso ininterrumpido a la Plataforma. No obstante, se reserva el derecho de suspender temporalmente el servicio por razones de mantenimiento, actualizaciones o fuerza mayor, notificando oportunamente a los usuarios.
  </p>

  <h3>10. Propiedad Intelectual</h3>
  <p>
    Todos los derechos sobre la Plataforma, incluyendo su código fuente, diseño, estructura de base de datos y la marca PREFECT APP, son propiedad exclusiva de la empresa desarrolladora y están protegidos por las leyes aplicables de propiedad intelectual.
  </p>

  <h3>11. Modificaciones</h3>
  <p>
    La empresa se reserva el derecho de modificar en cualquier momento los presentes Términos y Condiciones. Las modificaciones entrarán en vigor una vez publicadas y notificadas en la Plataforma. El uso continuado del sistema implica la aceptación de dichas modificaciones.
  </p>

  <h3>12. Terminación del Acceso</h3>
  <p>
    La empresa podrá suspender o eliminar cuentas de usuarios que incumplan estos Términos y Condiciones o que hagan uso indebido de la Plataforma, sin previo aviso si así lo justifica la gravedad de la infracción.
  </p>

  <h3>13. Jurisdicción y Legislación Aplicable</h3>
  <p>
    Estos Términos y Condiciones se rigen por la legislación vigente en los Estados Unidos Mexicanos. Cualquier conflicto derivado del uso de la Plataforma será resuelto ante los tribunales competentes del mismo territorio.
  </p>
</div>


      <div class="terms-footer">
        <div class="terms-check">
          <input type="checkbox" id="acceptTerms" />
          <label for="acceptTerms">Acepto los términos y condiciones</label>
        </div>
        <div class="terms-buttons">
          <button id="rejectBtn" class="terms-btn reject">Rechazar</button>
          <button id="acceptBtn" class="terms-btn accept" disabled>Aceptar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Aviso de Privacidad -->
  <!-- Modal para Aviso de Privacidad -->
<div class="privacy-modal" id="privacyModal">
    <div class="terms-content">
        <div class="terms-header">
            <h2>Aviso de Privacidad</h2>
        </div>
        <div class="terms-text" style="padding: 20px;">
            <p><strong>Responsable:</strong> PREFECT APP, con domicilio en [inserta dirección], es responsable del tratamiento de tus datos personales.</p>
            <p><strong>Datos recabados:</strong> Nombre, correo institucional, identificador de usuario, asignaciones y registros de asistencia.</p>
            <p><strong>Finalidades:</strong> Brindar acceso a la plataforma, control institucional, reportes y mejoras del sistema.</p>
            <p><strong>Transferencias:</strong> No se transfieren datos a terceros, salvo obligación legal.</p>
            <p><strong>Derechos ARCO:</strong> Puedes acceder, rectificar, cancelar u oponerte al uso de tus datos enviando una solicitud a <strong>prefectapp0@gmail.com</strong>.</p>
            <p><strong>Medidas de seguridad:</strong> Cifrado de contraseñas, verificación OTP y gestión segura de sesiones.</p>
            <p><strong>Cambios:</strong> Nos reservamos el derecho de actualizar este Aviso, lo cual se notificará en la Plataforma.</p>
        </div>
        <div class="terms-footer">
            <div class="terms-buttons">
                <button id="closePrivacy" class="terms-btn accept">Cerrar</button>
            </div>
        </div>
    </div>
</div>

  <!-- Contenido principal -->
  <div class="container-form register hidden" id="mainContent">
    <div class="information">
      <div class="info-childs">
        <h2 id="mainTitle">Registro Completo</h2>
        <p id="mainMessage">Tu cuenta ha sido creada correctamente.</p>
        <a id="actionLink" href="https://prefect-app-production.up.railway.app/pages/login.html">
          <input class="ini" type="button" value="Iniciar Sesión" id="sign-in" />
        </a>
        <div class="view-terms-btn">
          <input class="ini" type="button" value="Ver Términos Nuevamente" id="viewTermsBtn" />
        </div>
        <br />
        <p id="secondaryMessage">¿Ya tienes cuenta? ¡Inicia sesión ahora!</p>
      </div>
    </div>
    <div class="form-information">
      <div class="form-information-childs">
        <h2 id="sideTitle">Gracias por registrarte</h2>
        <p id="sideMessage">Revisa tu correo electrónico para confirmar tu cuenta.</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const termsModal = document.getElementById('termsModal');
      const acceptCheck = document.getElementById('acceptTerms');
      const acceptBtn = document.getElementById('acceptBtn');
      const rejectBtn = document.getElementById('rejectBtn');
      const viewTermsBtn = document.getElementById('viewTermsBtn');
      const mainContent = document.getElementById('mainContent');

      const mainTitle = document.getElementById('mainTitle');
      const mainMessage = document.getElementById('mainMessage');
      const secondaryMessage = document.getElementById('secondaryMessage');
      const sideTitle = document.getElementById('sideTitle');
      const sideMessage = document.getElementById('sideMessage');
      const actionLink = document.getElementById('actionLink');
      const signInBtn = document.getElementById('sign-in');

      // Aviso de Privacidad
     const privacyModal = document.getElementById('privacyModal');
const showPrivacyBtn = document.getElementById('showPrivacyPolicy');
const closePrivacy = document.getElementById('closePrivacy');

showPrivacyBtn.addEventListener('click', (e) => {
    e.preventDefault();
    // Ocultar el modal de términos
    termsModal.style.opacity = '0';
    termsModal.style.pointerEvents = 'none';
    
    // Mostrar el modal de privacidad
    privacyModal.style.display = 'flex';
    setTimeout(() => {
        privacyModal.classList.add('active');
    }, 10);
});

closePrivacy.addEventListener('click', () => {
    privacyModal.classList.remove('active');
    setTimeout(() => {
        privacyModal.style.display = 'none';
        // Restaurar visibilidad del modal de términos
        termsModal.style.opacity = '1';
        termsModal.style.pointerEvents = 'auto';
    }, 300);
});

      // Mostrar modal al cargar
      setTimeout(() => {
        termsModal.classList.add('active');
      }, 200);

      // Habilitar botón de aceptar
      acceptCheck.addEventListener('change', () => {
        acceptBtn.disabled = !acceptCheck.checked;
      });

      const closeModal = () => {
    termsModal.classList.remove('active');
    setTimeout(() => {
        mainContent.classList.remove('hidden');
    }, 300);
};


      acceptBtn.addEventListener('click', async () => {
        closeModal();
        mainTitle.textContent = '¡Registro Completado!';
        mainMessage.textContent = 'Has aceptado los términos correctamente.';
        sideTitle.textContent = 'Bienvenido/a';
        sideMessage.textContent = 'Tu cuenta ha sido creada con éxito.';
        document.querySelector('.view-terms-btn').style.display = 'none';

        setTimeout(() => {
          mainContent.classList.remove('hidden');
          mainContent.classList.remove('rejected');
        }, 500);

        try {
          await fetch('/confirm-registration', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ acceptTerms: true })
          });
        } catch (error) {
          console.error('Error:', error);
        }
      });

      rejectBtn.addEventListener('click', () => {
        closeModal();
        mainTitle.textContent = 'Registro Incompleto';
        mainMessage.textContent = 'Debes aceptar los términos para completar el registro.';
        sideTitle.textContent = 'Términos Requeridos';
        sideMessage.textContent = 'Para usar nuestra plataforma es necesario aceptar los términos.';
        actionLink.href = '/pages/register.html';
        signInBtn.value = 'Volver a Registrar';

        setTimeout(() => {
          mainContent.classList.remove('hidden');
          mainContent.classList.add('rejected');
        }, 500);

        document.querySelector('.view-terms-btn').style.display = 'block';
      });

    viewTermsBtn.addEventListener('click', () => {
    termsModal.classList.add('active');
    mainContent.classList.add('hidden');
});
    });
  </script>
</body>
</html>
